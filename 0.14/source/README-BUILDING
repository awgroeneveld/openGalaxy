This document describes how to compile openGalaxy on Linux.
-----------------------------------------------------------

Note: For Windows compilation instruction see the file README-MSYS2.TXT


Building openGalaxy:
--------------------

The commands below can be used to build openGalaxy on any Linux flavor.
(On Debian/Ubuntu/Raspbian based systems you should not use this method.)

# List of required packages (names may vary for your distro)...
#
# libgtk-3-dev
# libmariadbclient-dev-compat OR libmysqlclient-dev
# build-essential
# cmake
# git
# wget

# Extract/prepare source
tar xf opengalaxy-0.15.tar.xz
cd openagalaxy-0.15
mkdir build && cd build

# Configure the source
../configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var [--enable-debug] [other options to configure script]

# Build and install
make && sudo make install

# If your Linux distribution has the xdg-utils package you can also use:
# (to install .desktop files for the applications)
make && sudo make install-xdg


Creating .deb packages on Ubuntu or Debian GNU/Linux:
-----------------------------------------------------

Use the following sequence of commands to generate installable packages:

 # extract sourcecode and cd into the directory
 tar xf opengalaxy-0.15.tar.xz
 cd opengalaxy-0.15

 # create a build directory for the desired distro and arch
 # (example: debian stretch for amd64)
 mkdir build-stretch-amd64
 cd build-stretch-amd64

 # call the build-debs script to build the packages
 ../build-debs debian stretch amd64 ../../opengalaxy-0.15.tar.xz

Notes:

 The build-debs script installs packages onto your system using apt-get
 if nessesary. ie. You might want to do this on a virtual machine.
 The script also requires the current user to have sudo privileges.

 Tested combination of arguments to the build-debs script are:

  (for Debian)
   ../build-debs debian jessie amd64 ../../opengalaxy-0.15.tar.xz
   ../build-debs debian jessie i386 ../../opengalaxy-0.15.tar.xz
   ../build-debs debian stretch amd64 ../../opengalaxy-0.15.tar.xz
   ../build-debs debian stretch i386 ../../opengalaxy-0.15.tar.xz

  (for Ubuntu 18.04 LTS)
   ../build-debs ubuntu bionic amd64 ../../opengalaxy-0.15.tar.xz
   ../build-debs ubuntu bionic i386 ../../opengalaxy-0.15.tar.xz

  (for Raspbian)
   ../build-debs raspbian jessie amrhf ../../opengalaxy-0.15.tar.xz
   ../build-debs raspbian stretch amrhf ../../opengalaxy-0.15.tar.xz

 Instead of a specific distro version you can also use 'stable' and 'testing'.

 To speed up the build, create the directory: /var/cache/pbuilder/build 
 and mount a large (enough) ramdrive at that location before calling the
 build-debs script. A suitable line can be placed in /etc/fstab :

 tmpfs /var/cache/pbuilder/build tmpfs noauto,nosuid,nodiratime,size=4096M 0 0

 It will not mount automatically, you must mount it using:
 sudo mount /var/cache/pbuilder/build


Installing openGalaxy .deb packages:
------------------------------------

To install the created .deb packages use the command:

sudo dpkg -i *.deb

If dpkg complains about unresolved dependencies, you can install them with:

sudo apt-get -f install


Uninstalling openGalaxy .deb packages:
--------------------------------------

You may use your favourite package-manager application to uninstall
openGalaxy, or from a console using the command:

sudo apt-get [--purge] remove opengalaxy*

Note: The /usr/share/galaxy/ssl directory will never be deleted automatically,
even if the --purge option was used to uninstall openGalaxy.

